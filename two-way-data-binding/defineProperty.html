<!DOCTYPE html>
<html lang="zh-cmn-Hans">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="IE=edge, chrome=1" />
    <title>debounce</title>
    <style>
      #container {
        width: 100%;
        height: 200px;
        line-height: 200px;
        text-align: center;
        color: #fff;
        background-color: #444;
        font-size: 30px;
      }
    </style>
  </head>

  <body>
    <span id="container">1</span>
    <button id="button">点击加 1</button>
    <script>
       // ------------------------------------传统做法----------------------------
      // document.getElementById("button").addEventListener("click", function () {
      //   var container = document.getElementById("container");
      //   container.innerHTML = Number(container.innerHTML) + 1;
      // });

      // ------------------------------------defineProperty----------------------------
      var obj = {
        value: 1,
      };

      // 储存 obj.value 的值, 否则 set 中直接 obj.value = newValue 就会陷入无限的循环中
      var value = 1;

      Object.defineProperty(obj, "value", {
        get: function () {
          return value;
        },
        set: function (newValue) {
          value = newValue;
          document.getElementById("container").innerHTML = newValue;
        },
      });

      document.getElementById("button").addEventListener("click", function () {
        obj.value += 1;
      });
    </script>
  </body>
</html>
